<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VisionServer: Building VisionServer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/FRC3407/VisionServer" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VisionServer
   &#160;<span id="projectnumber">v2.0.0-36-ga34c0fd</span>
   </div>
   <div id="projectbrief">FRC vision library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_guide_Build_.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Building VisionServer </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><b>VisionServer uses Make to automate building. The included makefile supports automatic platform detection and provides a few different options and targets.</b></p>
<h1>Targets</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Target   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Example Usage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>shared</code>   </td><td class="markdownTableBodyNone">This is the default target - it builds the shared library libvs3407.so.   </td><td class="markdownTableBodyNone"><code>make shared</code> or just <code>make</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>static</code>   </td><td class="markdownTableBodyNone">This builds a static library (archive) of all sources - libvs3407.a. Note that the correct libraries will need to be linked to when using this form.   </td><td class="markdownTableBodyNone"><code>make static</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>clean</code>   </td><td class="markdownTableBodyNone">This deletes all outputs and intermediate files, and is sometimes required when building after changing paramters (ex. debug to release).   </td><td class="markdownTableBodyNone"><code>make clean</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>rebuild</code>   </td><td class="markdownTableBodyNone">This calls <code>rebuild-shared</code>, and is only included to provide congruency for <code>shared</code> being the default build option.   </td><td class="markdownTableBodyNone"><code>make rebuild</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>rebuild-shared</code>   </td><td class="markdownTableBodyNone">This cleans all outputs and then builds the shared library.   </td><td class="markdownTableBodyNone"><code>make rebuild-shared</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>rebuild-static</code>   </td><td class="markdownTableBodyNone">Clean all outputs and then build the static library.   </td><td class="markdownTableBodyNone"><code>make rebuild-static</code>   </td></tr>
</table>
<h1>Options (Reassignable Variables)</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Options   </th><th class="markdownTableHeadNone">Default Option   </th><th class="markdownTableHeadNone">Example Usage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>OPT</code>   </td><td class="markdownTableBodyNone">The OPTimization level that sources are compiled with.   </td><td class="markdownTableBodyNone"><code>debug</code> : -g -Og -D__DEBUG__ <br  />
 <code>release</code> : -O3 -D__RELEASE__   </td><td class="markdownTableBodyNone"><code>release</code>   </td><td class="markdownTableBodyNone"><code>make OPT=debug</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>TFLITE</code>   </td><td class="markdownTableBodyNone">Defines whether or not TfLite (and edgeTPU) libs are linked with, and the corresponding code that uses these are included. This is useful if ML vision will not be used and it is undesired to deal with manually updating these libraries (they are not included by default on WPILibPi)   </td><td class="markdownTableBodyNone"><code>true</code>/<code>yes</code>/<code>y</code>/<code>include</code> : TfLite included <br  />
 <code>false</code>/<code>no</code>/<code>n</code>/<code>exclude</code> : TfLite not included   </td><td class="markdownTableBodyNone"><code>true</code>   </td><td class="markdownTableBodyNone"><code>make TFLITE=exclude</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADEFINES</code>   </td><td class="markdownTableBodyNone">Any additional defines to be declared when compiling. For multiple values, separate by spaces and surround with quotes. Note that "-D" is automatically appended to each define, and this is not required for input.   </td><td class="markdownTableBodyNone"><code>user-defined</code>   </td><td class="markdownTableBodyNone"><code>none</code>   </td><td class="markdownTableBodyNone"><code>make ADEFINES="REMOVE_DISCONNECTED_CAMERAS COMPENSATE_ON_STARTUP"</code>   </td></tr>
</table>
<p ><b>Other internally modifyable and more general options include:</b> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>CROSS_PREFIX</code>   </td><td class="markdownTableBodyNone">The prefix for the cross-compiler.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>CXX</code>   </td><td class="markdownTableBodyNone">The name of the compiler.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>AR</code>   </td><td class="markdownTableBodyNone">The name of the archiving tool.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>STD</code>   </td><td class="markdownTableBodyNone">What version of the standard library to use.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>*_DIR</code>   </td><td class="markdownTableBodyNone">These are self-explainatory, see the makefile for all options.   </td></tr>
</table>
<h1>Linking and Required Libraries</h1>
<p ><b>All required libraries are included along with the source and are updated automatically using a GitHub Action. In case any of the dependencies need to be referenced, below is a list of all required libraries and how they were sourced.</b> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Library   </th><th class="markdownTableHeadNone">Sourcing Method / Notes   </th><th class="markdownTableHeadNone">Link(s)    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">WPILib (built for raspbian)   </td><td class="markdownTableBodyNone">Extracted from the "cpp-multiCameraServer" example, which is located on the latest WPILibPi release.   </td><td class="markdownTableBodyNone">&gt; <a href="https://github.com/wpilibsuite/WPILibPi/releases/latest">https://github.com/wpilibsuite/WPILibPi/releases/latest</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Pigpio   </td><td class="markdownTableBodyNone">Built from source.   </td><td class="markdownTableBodyNone">&gt; <a href="https://github.com/joan2937/pigpio">https://github.com/joan2937/pigpio</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Tensorflow Lite   </td><td class="markdownTableBodyNone">Built from source <b>using Bazel</b>. Headers are extracted using this command: &lsquo;find ./tensorflow -name &rsquo;*.h' | cpio -pdm OUTPUT_DIR<code>. \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; &gt; <a href="https://github.com/tensorflow/tensorflow">https://github.com/tensorflow/tensorflow</a> &lt;br&gt; &gt; <a href="https://www.tensorflow.org/lite/guide/build_arm">https://www.tensorflow.org/lite/guide/build_arm</a>#cross-compilation_for_arm_with_bazel \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; EdgeTPU driver \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Built from source using the included dockerfile and Bazel. Note that in order to function properly with TfLite, the</code>workspace.bzl&lt;tt&gt;file needs to be configured with the same tensorflow commit as was used to build tensorflow lite. Also note that the output libs are stripped, and this causes them to fail to be linked during cross-compilation. I solved this problem by removing all instances of<code>within the makefile using the command</code>sed -i 's///' ./Makefile<code>. \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; &gt; <a href="https://github.com/google-coral/libedgetpu">https://github.com/google-coral/libedgetpu</a> \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; Flatbuffers (headers for TfLite) \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; The automation script uses this command (while within the tensorflow repo directory):</code>wget -O flatbuffers.tar.gz $(grep 'urls = tf_mirror_urls(".*"' third_party/flatbuffers/workspace.bzl | cut -d " -f2)`. The headers are then located under `flatbuffers/include/flatbuffers/`.   </td><td class="markdownTableBodyNone">&gt; <a href="http://github.com/google/flatbuffers">http://github.com/google/flatbuffers</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Abseil (headers for TfLite)   </td><td class="markdownTableBodyNone">The automation script uses this command (while within the tensorflow rep directory): `wget -O absl.tar.gz <a href="https://github.com/abseil/abseil-cpp/archive/$">https://github.com/abseil/abseil-cpp/archive/$</a>(grep 'ABSL_COMMIT = ".*"' third_party/absl/workspace.bzl | cut -d " -f2).tar.gz&lt;tt&gt;. The headers can then be extracted using:find ./absl -name '*.h' | cpio -pdm OUTPUT_DIR`.   </td><td class="markdownTableBodyNone">&gt; <a href="https://github.com/abseil/abseil-cpp">https://github.com/abseil/abseil-cpp</a>   </td></tr>
</table>
<p >When linking statically to VisionServer, it is also required to link to many of these libraries. For a complete list it is best to reference the makefile. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Jul 10 2022 20:28:43 for VisionServer by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
